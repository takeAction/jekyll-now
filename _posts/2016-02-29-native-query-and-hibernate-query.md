---
layout: post
title: native query and hibernate query
date: 2016-02-29 21:35
author: 2freesky
comments: true
categories: [Hibernate]
---
<p class="western" align="LEFT"><span style="color:#000000;"><span style="font-size:small;">Model class is :</span></span></p>
<p class="western" align="LEFT"><span style="color:#646464;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">@Entity</span></span></span></p>
<p class="western" align="LEFT"><span style="color:#7f0055;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;"><b>public</b></span></span></span> <span style="color:#7f0055;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;"><b>class</b></span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;"> Address {</span></span></span></p>
<p class="western" align="LEFT"><span style="color:#646464;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">@Id</span></span></span></p>
<p class="western" align="LEFT"><span style="color:#646464;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">@GeneratedValue</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">(strategy=GenerationType.</span></span></span><span style="color:#0000c0;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;"><i><b>AUTO</b></i></span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">)</span></span></span></p>
<p class="western" align="LEFT"><span style="color:#7f0055;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;"><b>private</b></span></span></span> <span style="color:#7f0055;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;"><b>int</b></span></span></span> <span style="color:#0000c0;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">id</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">;</span></span></span></p>
<p class="western" align="LEFT"><span style="color:#7f0055;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;"><b>private</b></span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;"> String </span></span></span><span style="color:#0000c0;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">zipCode</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">;</span></span></span></p>
<p class="western" align="LEFT"><a href="https://2freesky.files.wordpress.com/2016/02/tmp1.png" rel="attachment wp-att-84"><img class="alignnone size-medium wp-image-84" src="https://2freesky.files.wordpress.com/2016/02/tmp1.png?w=300" alt="tmp1" width="300" height="224" /></a></p>
<p class="western" align="LEFT"><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">1.Named hibernate query and native query</span></span></span></p>
<p class="western" align="LEFT"><span style="color:#646464;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">@Entity</span></span></span></p>
<p class="western" align="LEFT"><span style="color:#646464;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">@NamedQueries</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">(</span></span></span></p>
<p class="western" align="LEFT"><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;"> value = { </span></span></span></p>
<p class="western" align="LEFT"><span style="color:#646464;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">@NamedQuery</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">(name=</span></span></span><span style="color:#2a00ff;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">"query1"</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">, query=</span></span></span><span style="color:#2a00ff;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">"from Address a where a.id=:id"</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">),</span></span></span></p>
<p class="western" align="LEFT"><span style="color:#646464;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">@NamedQuery</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">(name=</span></span></span><span style="color:#2a00ff;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">"query2"</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">, query=</span></span></span><span style="color:#2a00ff;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">"select a from Address a"</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">)</span></span></span></p>
<p class="western" align="LEFT"><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;"> }</span></span></span><span style="font-size:small;font-family:'Courier New', monospace;color:#000000;line-height:1.5;">)</span></p>
<p class="western" align="LEFT"><span style="color:#646464;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">@NamedNativeQueries</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">(</span></span></span></p>
<p class="western" align="LEFT"><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;"> value = {</span></span></span></p>
<p class="western" align="LEFT"><span style="color:#646464;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">@NamedNativeQuery</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">(name=</span></span></span><span style="color:#2a00ff;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">"query3"</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">, query=</span></span></span><span style="color:#2a00ff;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">"select id,zipcode,zipcode test from address"</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">,</span></span></span></p>
<p class="western" align="LEFT"><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;"> resultSetMapping=</span></span></span><span style="color:#2a00ff;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">"result2"</span></span></span></p>
<p class="western" align="LEFT"><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">)</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;"> }</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">)</span></span></span></p>
<p class="western" align="LEFT"><span style="color:#646464;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">@SqlResultSetMappings</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">(</span></span></span></p>
<p class="western" align="LEFT"><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;"> value = {</span></span></span></p>
<p class="western" align="LEFT"><span style="color:#646464;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">@SqlResultSetMapping</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">(</span></span></span></p>
<p class="western" align="LEFT"><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;"> name = </span></span></span><span style="color:#2a00ff;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">"result1"</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">,</span></span></span></p>
<p class="western" align="LEFT"><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;"> entities = {</span></span></span></p>
<p class="western" align="LEFT"><span style="color:#646464;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">@EntityResult</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">(</span></span></span></p>
<p class="western" align="LEFT"><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;"> entityClass=Address.</span></span></span><span style="color:#7f0055;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;"><b>class</b></span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">,</span></span></span></p>
<p class="western" align="LEFT"><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;"> fields = {</span></span></span></p>
<p class="western" align="LEFT"><span style="color:#646464;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">@FieldResult</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">(name=</span></span></span><span style="color:#2a00ff;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">"id"</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">, column=</span></span></span><span style="color:#2a00ff;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">"id"</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">),</span></span></span></p>
<p class="western" align="LEFT"><span style="color:#646464;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">@FieldResult</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">(name=</span></span></span><span style="color:#2a00ff;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">"zipCode"</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">, column=</span></span></span><span style="color:#2a00ff;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">"zipcode"</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">)</span></span></span></p>
<p class="western" align="LEFT"><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;"> }</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;"> )</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;"> }</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;"> ),</span></span></span></p>
<p class="western" align="LEFT"><span style="color:#646464;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">@SqlResultSetMapping</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">(</span></span></span></p>
<p class="western" align="LEFT"><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;"> name = </span></span></span><span style="color:#2a00ff;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">"result2"</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">,</span></span></span></p>
<p class="western" align="LEFT"><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;"> entities = {</span></span></span></p>
<p class="western" align="LEFT"><span style="color:#646464;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">@EntityResult</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">(</span></span></span></p>
<p class="western" align="LEFT"><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;"> entityClass=Address.</span></span></span><span style="color:#7f0055;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;"><b>class</b></span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">,</span></span></span></p>
<p class="western" align="LEFT"><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;"> fields = {</span></span></span></p>
<p class="western" align="LEFT"><span style="color:#646464;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">@FieldResult</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">(name=</span></span></span><span style="color:#2a00ff;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">"zipCode"</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">, column=</span></span></span><span style="color:#2a00ff;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">"zipcode"</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">),</span></span></span></p>
<p class="western" align="LEFT"><span style="color:#646464;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">@FieldResult</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">(name=</span></span></span><span style="color:#2a00ff;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">"id"</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">, column=</span></span></span><span style="color:#2a00ff;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">"id"</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">)</span></span></span></p>
<p class="western" align="LEFT"><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;"> }</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;"> )</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;"> },</span></span></span></p>
<p class="western" align="LEFT"><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;"> columns = {</span></span></span></p>
<p class="western" align="LEFT"><span style="color:#646464;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">@ColumnResult</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">(name=</span></span></span><span style="color:#2a00ff;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">"test"</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">) </span></span></span></p>
<p class="western" align="LEFT"><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;"> }</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;"> )</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;"> }</span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">)</span></span></span></p>
<p class="western" align="LEFT"><span style="color:#7f0055;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;"><b>public</b></span></span></span> <span style="color:#7f0055;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;"><b>class</b></span></span></span><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;"> Address {</span></span></span></p>
<p class="western" align="LEFT"><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">}</span></span></span></p>
<p class="western" align="LEFT"><span style="color:#000000;"><span style="font-size:small;">1.1 NamedQuery/NamedNativeQuery</span></span></p>
<p class="western" align="LEFT"><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">Be defined at the class level. </span></span></span></p>
<p class="western" align="LEFT"><span style="color:#000000;"><span style="font-family:'Courier New', monospace;"><span style="font-size:small;">However their definitions are global to the session factory/entity manager factory scope.</span></span></span></p>
<p class="western" align="LEFT"><a href="https://2freesky.files.wordpress.com/2016/02/tmp2.png" rel="attachment wp-att-85"><img class="alignnone size-medium wp-image-85" src="https://2freesky.files.wordpress.com/2016/02/tmp2.png?w=300" alt="tmp2" width="300" height="67" /></a></p>
<p class="western" align="LEFT"><span style="color:#000000;"><span style="font-size:small;">1.2 SqlResultSetMapping</span></span></p>
<p class="western" align="LEFT"><a href="https://2freesky.files.wordpress.com/2016/02/tmp3.png" rel="attachment wp-att-86"><img class="alignnone size-medium wp-image-86" src="https://2freesky.files.wordpress.com/2016/02/tmp3.png?w=300" alt="tmp3" width="300" height="84" /></a></p>
<p class="western" align="LEFT"><span style="color:#000000;"><span style="font-size:small;">If @SqlResultSetMapping only has 'entities', then the query string only can be : select * from address or select '' id, zipcode from address, </span></span></p>
<p class="western" align="LEFT"><span style="color:#000000;"><span style="font-size:small;">that is the number of columns in query string has to be all fields of model class.</span></span></p>
<p class="western" align="LEFT"><span style="color:#000000;"><span style="font-size:small;">And the return value is : List&lt;Address&gt;</span></span></p>
<p class="western" align="LEFT"><span style="color:#000000;"><span style="font-size:small;">If @SqlResultSetMapping only has 'columns', then the number of columns in query string is the same as number of @ColumnResult(column name or column alias is the same as value of 'name' in @ColumnResult)</span></span></p>
<p class="western" align="LEFT"><span style="color:#000000;"><span style="font-size:small;">And the return value is : List&lt;Object[]&gt;</span></span></p>
<p class="western" align="LEFT"><span style="color:#000000;"><span style="font-size:small;">If @SqlResultSetMapping has 'entities' and 'columns', then the number of columns in query string is the same as number of 'entities' plus 'columns'.</span></span></p>
<p class="western" align="LEFT"><span style="color:#000000;"><span style="font-size:small;">And the return value is : List&lt;Object[]&gt;, wherein, object[0] is the Address, it is scalar values from object[1]</span></span></p>
